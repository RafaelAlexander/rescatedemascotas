{{#partial "titulo"}}
<title>Mis Mascotas</title>
{{/partial}}

{{#partial "contenido"}}
<h2 align="center">Mis mascotas</h2>
<table class="table table-striped table-hover" style="width:100%">
            <thead class="thead-dark">
            <tr>
                <th scope="col">Chapita</th>
                <th scope="col">Nombre</th>
                <th scope="col">Apodo</th>
                <th scope="col">Edad</th>
                <th scope="col">Tipo</th>
                <th scope="col">Sexo</th>
                <th scope="col">Descripción</th>
                <th scope="col">QR</th>

            </tr>
            </thead>
            {{#each mascotas}}
                <tr id="mascota{{chapita}}">
                    <td>{{chapita}}</td>
                    <td>{{nombre}}</td>
                    <td>{{apodo}} </td>
                    <td>{{edadAproximada}}</td>
                    <td>{{tipoMascota}}</td>
                    <td>{{tipoSexo}}</td>
                    <td>{{descripcionFisica}}</td>
                    <td><button class="btn btn-outline-primary" data-toggle="modal" data-target="#exampleModal" onclick="generarQR({{chapita}})"><i class="fas fa-qrcode"></i></button></td>
                </tr>
            {{/each}}
        </table>
        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Código QR</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <div id="qrcode" align="center"></div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
              </div>
            </div>
          </div>
        </div>

{{/partial}}
<script>
    function generarQR(chapita) {
    document.getElementById("qrcode").innerHTML = "";
    var fila = document.getElementById("mascota"+chapita);
    var qrc = new QRCode(document.getElementById("qrcode"), fila.cells[0].innerHTML);
    }
    </script>
{{> layout.html.hbs }}
